<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文章 - Lyang1273</title>
    <link rel="stylesheet" href="/style.css">
    <style>
        main{max-width:920px;margin:0 auto;padding:0 2rem 10rem;}
        .page-title{font-size:3.2rem;font-weight:800;text-align:center;margin:4rem 0 3rem;letter-spacing:3px;}
        .section-title{font-size:1.9rem;font-weight:700;margin:2.5rem 0 1.5rem;text-align:center;opacity:0.9;}

        /* 最新文章 */
        .latest-grid{display:grid;gap:1.8rem;grid-template-columns:repeat(auto-fit,minmax(380px,1fr));}
        @media(max-width:768px){.latest-grid{grid-template-columns:1fr;}}

        /* 可折叠分类面板 */
        .fold-panel{margin:3rem 0;}
        .fold-header{
            background:rgba(255,255,255,0.09);border:1px solid rgba(255,255,255,0.18);
            border-radius:16px;padding:1.4rem 2rem;cursor:pointer;transition:.35s;
            display:flex;align-items:center;justify-content:space-between;font-size:1.35rem;font-weight:600;
            user-select:none;backdrop-filter:blur(10px);
        }
        .fold-header:hover{background:rgba(255,255,255,0.15);}
        .fold-icon{transition:transform .4s;font-size:1.8rem;opacity:0.7;}
        .fold-header.active .fold-icon{transform:rotate(90deg);}
        .fold-content{
            display:grid;gap:1.6rem;margin-top:1.6rem;padding:0 1rem;
            max-height:0;overflow:hidden;transition:max-height .6s ease;
        }
        .fold-content.open{max-height:3000px;}

        /* 文章卡片 */
        .article-card{
            background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.15);
            border-radius:16px;padding:1.8rem 2.2rem;transition:all .35s;backdrop-filter:blur(12px);cursor:pointer;
        }
        .article-card:hover{
            transform:translateY(-8px);box-shadow:0 20px 50px rgba(0,0,0,0.5);background:rgba(255,255,255,0.13);
        }
        .article-card h3{font-size:1.32rem;font-weight:600;margin:0 0 0.7rem;}
        .article-card h3 a{color:inherit;text-decoration:none;}
        .meta{font-size:0.92rem;opacity:0.75;display:flex;gap:1.4rem;margin:0.6rem 0;}
        .tag{background:rgba(110,207,255,0.2);color:#6ecfff;padding:0.25rem 0.8rem;border-radius:20px;font-size:0.84rem;}
        .excerpt{line-height:1.7;opacity:0.88;font-size:0.98rem;margin-top:0.8rem;}
    </style>
</head>
<body>
<div class="bg-container"></div>
<div class="bg-overlay"></div>
<div w3-include-html="/header.html"></div>

<main>
    <h1 class="page-title">文章</h1>

    <!-- 最新文章 -->
    <div class="section-title">最新更新</div>
    <div class="latest-grid" id="latest"></div>

    <!-- 可折叠分类 -->
    <div class="fold-panel">
        <div class="fold-header" onclick="toggle(this)">
            <span>日记</span>
            <span class="fold-icon">></span>
        </div>
        <div class="fold-content"><div class="article-list" id="diary"></div></div>
    </div>

    <div class="fold-panel">
        <div class="fold-header" onclick="toggle(this)">
            <span>经验</span>
            <span class="fold-icon">></span>
        </div>
        <div class="fold-content"><div class="article-list" id="experience"></div></div>
    </div>
</main>

<script>
function toggle(el) {
    el.classList.toggle('active');
    const content = el.nextElementSibling;
    content.classList.toggle('open');
}

// 加载文章
fetch('/doc/articles.json')
  .then(r => r.json())
  .then(arts => {
    const sorted = arts.sort((a,b) => b.id.localeCompare(a.id));

    // 最新6篇
    sorted.slice(0,6).forEach(a => {
      document.getElementById('latest').innerHTML += createCard(a);
    });

    // 分类填充
    sorted.forEach(a => {
      const container = a.category === 'diary' ? 'diary' : 'experience';
      document.getElementById(container).innerHTML += createCard(a);
    });
  });

function createCard(a) {
  return `
    <div class="article-card" onclick="location.href='/doc/\( {a.category}/ \){a.folder}/'">
      <h3><a href="/doc/\( {a.category}/ \){a.folder}/">${a.title}</a></h3>
      <div class="meta">
        <span>${a.date}</span>
        <span class="tag">${a.category==='diary'?'日记':'经验'}</span>
      </div>
      \( {a.excerpt ? `<div class="excerpt"> \){a.excerpt}</div>` : ''}
    </div>`;
}
</script>
<script src="/include.js"></script>
</body>
</html>