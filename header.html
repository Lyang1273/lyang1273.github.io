<header class="site-header">
  <div class="site-title">Lyang1273</div>

  <!-- 右侧区域：宽度为父容器的 65%，包含箭头和导航 -->
  <div class="nav-wrapper">
    <button class="nav-arrow nav-arrow-left" aria-hidden="true" tabindex="-1">‹</button>
    <nav class="header-buttons nav-scroll" aria-label="主导航" tabindex="0">
      <a href="/index.html" class="header-link"><span class="header-btn">主页</span></a>
      <a href="/doc/index.html" class="header-link"><span class="header-btn">文章</span></a>
      <!-- <a href="/contact/index.html" class="header-link"><span class="header-btn">联系人</span></a> -->
      <a href="/music/index.html" class="header-link"><span class="header-btn">音乐</span></a>
      <a href="/aboutme.html" class="header-link"><span class="header-btn">关于我…</span></a>
    </nav>
    <button class="nav-arrow nav-arrow-right" aria-hidden="true" tabindex="-1">›</button>
  </div>
</header>

<style>
/* 更低高度的顶部栏 */
.site-header {
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 100;
  display: flex;
  align-items: center;
  gap: 12px;                 /* 标题与导航间距 */
  padding: 8px 14px;
  background: rgba(20,20,20,0.40);
  backdrop-filter: blur(12px) saturate(130%);
  border-bottom: 1px solid rgba(255,255,255,0.03);
  height: 48px;
  box-sizing: border-box;
}

/* 标题：允许收缩，防止过长时挤压右侧区域 */
.site-title {
  color: #fff;
  font-weight: 700;
  font-size: 1.2rem;
  line-height: 1;
  flex: 0 1 auto;           /* 允许收缩，但不会增长 */
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 35%;           /* 限制最大宽度，确保右侧 65% 区域有足够空间 */
}

/* 右侧固定宽度容器：占父容器宽度的 65%，靠右 */
.nav-wrapper {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 65%;               /* 占据整个导航栏宽度的 65% */
  margin-left: auto;        /* 靠右对齐 */
  flex-shrink: 0;           /* 防止被压缩 */
}

/* 箭头按钮：仅作视觉提示，不可点击，默认隐藏 */
.nav-arrow {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 30px; height: 30px;
  border-radius: 6px;
  border: none;
  background: rgba(255,255,255,0.03);
  color: #fff;
  pointer-events: none;     /* 不可点击 */
  transition: opacity 0.2s;
  opacity: 0;               /* 默认隐藏（无溢出时） */
  flex: 0 0 auto;
  font-size: 18px;
}
/* 当有溢出时，通过 JS 添加 visible 类来显示箭头 */
.nav-arrow.visible {
  opacity: 0.95;
}

/* 横向滚动容器：填充 nav-wrapper 剩余宽度 */
.nav-scroll {
  display: flex;
  gap: 10px;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
  padding: 4px 2px;
  align-items: center;
  flex: 1 1 auto;           /* 自动占满剩余宽度 */
  height: 100%;
  scroll-snap-type: x mandatory;
}

/* 隐藏滚动条 */
.nav-scroll::-webkit-scrollbar { display: none; }
.nav-scroll { -ms-overflow-style: none; scrollbar-width: none; }

/* 链接样式 */
.header-link { text-decoration: none; }
.header-btn {
  display: inline-block;
  white-space: nowrap;
  color: #E8E8E8;
  padding: 6px 10px;
  border-radius: 8px;
  transition: background .12s, color .12s, transform .08s;
  font-size: 0.88rem;
  line-height: 1;
  scroll-snap-align: start;
}
.header-btn:hover, .header-btn:focus {
  background: rgba(255,255,255,0.04);
  color: #fff;
  transform: translateY(-1px);
  outline: none;
}

/* 响应式：手机上隐藏箭头（覆盖 visible 类） */
@media (max-width: 720px) {
  .nav-arrow { display: none; }
}
</style>

<script>
(function(){
  const scroller = document.querySelector('.nav-scroll');
  const leftArrow = document.querySelector('.nav-arrow-left');
  const rightArrow = document.querySelector('.nav-arrow-right');
  if (!scroller || !leftArrow || !rightArrow) return;

  // 更新箭头可见性：当内容宽度超出容器时显示箭头，否则隐藏
  function updateArrowsVisibility() {
    const hasOverflow = scroller.scrollWidth > scroller.clientWidth;
    leftArrow.classList.toggle('visible', hasOverflow);
    rightArrow.classList.toggle('visible', hasOverflow);
  }

  // 监听滚动和窗口大小变化
  scroller.addEventListener('scroll', updateArrowsVisibility);
  window.addEventListener('resize', updateArrowsVisibility);
  // 初始化检查
  updateArrowsVisibility();

  // 鼠标拖拽滑动（桌面增强）
  let isDown = false;
  let startX;
  let scrollLeft;

  scroller.addEventListener('mousedown', (e) => {
    isDown = true;
    scroller.classList.add('dragging');
    startX = e.pageX - scroller.offsetLeft;
    scrollLeft = scroller.scrollLeft;
    e.preventDefault();
  });

  document.addEventListener('mouseup', () => {
    isDown = false;
    scroller.classList.remove('dragging');
  });

  document.addEventListener('mousemove', (e) => {
    if (!isDown) return;
    const x = e.pageX - scroller.offsetLeft;
    const walk = (x - startX) * 1.1;
    scroller.scrollLeft = scrollLeft - walk;
  });

  // 键盘左右键在 nav 聚焦时滚动
  scroller.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowRight') {
      scroller.scrollBy({ left: 100, behavior: 'smooth' });
      e.preventDefault();
    }
    if (e.key === 'ArrowLeft') {
      scroller.scrollBy({ left: -100, behavior: 'smooth' });
      e.preventDefault();
    }
  });
})();
</script>