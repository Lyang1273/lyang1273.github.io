<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>音乐 - Lyang1273</title>
    <link rel="stylesheet" href="/style.css">
    <style>
        main{display:flex;flex-direction:column;align-items:center;padding-bottom:10rem;}
        .page-title{margin:4rem 0 3rem;font-size:3.2rem;font-weight:800;letter-spacing:3px;text-shadow:0 4px 20px rgba(0,0,0,0.5);}
        .music-list{width:100%;max-width:860px;padding:0 2rem;display:flex;flex-direction:column;gap:2.2rem;}
        .music-item{
            background:rgba(255,255,255,0.08);
            border:1px solid rgba(255,255,255,0.16);
            border-radius:16px;
            padding:1.6rem 2rem;
            display:flex;align-items:center;gap:1.8rem;
            transition:all .35s ease;
            backdrop-filter:blur(12px);
        }
        .music-item:hover{background:rgba(255,255,255,0.14);transform:translateY(-6px);box-shadow:0 16px 40px rgba(0,0,0,0.5);}
        .music-cover img{width:76px;height:76px;border-radius:12px;object-fit:cover;box-shadow:0 8px 25px rgba(0,0,0,0.6);flex-shrink:0;}

        .player{flex:1;display:flex;flex-direction:column;gap:0.8rem;min-width:0;}
        .track-info .music-title{font-size:1.26rem;font-weight:600;}
        .track-info .music-artist{font-size:0.94rem;opacity:0.75;}

        .controls{display:flex;align-items:center;gap:1.2rem;width:100%;}
        .play-btn{
            width:44px;height:44px;border-radius:50%;
            background:rgba(255,255,255,0.22);border:none;flex-shrink:0;
            cursor:pointer;transition:all .3s;box-shadow:0 5px 18px rgba(0,0,0,0.4);
        }
        .play-btn:hover{background:rgba(255,255,255,0.32);}
        .play-btn svg{width:20px;height:20px;fill:#fff;}

        .progress-area{
            flex:1;display:flex;align-items:center;gap:0.8rem;
            min-width:0;cursor:pointer;user-select:none;
            height:50px;-webkit-tap-highlight-color:transparent;
            touch-action:none;
        }
        .time{font-size:0.94rem;opacity:0.85;width:46px;flex-shrink:0;text-align:center;}
        .progress-bar{
            flex:1;height:8px;background:rgba(255,255,255,0.18);
            border-radius:4px;position:relative;
        }
        .progress-fill{height:100%;width:0;background:#6ecfff;border-radius:4px;}
        .progress-knob{
            position:absolute;top:50%;left:0;transform:translate(-50%,-50%);
            width:18px;height:18px;background:#6ecfff;border-radius:50%;
            opacity:0;transition:opacity .2s;box-shadow:0 0 12px rgba(110,207,255,0.8);
        }
        .progress-area:active .progress-knob,
        .progress-area.dragging .progress-knob{opacity:1;}

        @media(max-width:768px){
            .music-item{flex-direction:row;padding:1.5rem 1.8rem;gap:1.6rem;}
            .play-btn{width:52px;height:52px;}
            .play-btn svg{width:24px;height:24px;}
            .progress-bar{height:10px;border-radius:5px;}
            .progress-knob{width:22px;height:22px;}
        }
    </style>
</head>
<body>
<div class="bg-container"></div>
<div class="bg-overlay"></div>
<div w3-include-html="/header.html"></div>

<main>
    <p>此页面的音质较低，前往<a href="/assets/music/original">此处</a>可聆听音质较好的版本</p>
    <h1 class="page-title">音乐</h1>
    <div class="music-list">

        <!-- 1. 14.3 Billion Years -->
        <div class="music-item">
            <div class="music-cover">
                <img src="/assets/music/album_image/Andrew Prahlow - 14.3 Billion Years.jpg" alt="14.3 Billion Years">
            </div>
            <div class="player" data-src="/assets/music/Andrew Prahlow - 14.3 Billion Years.mp3">
                <div class="track-info">
                    <div class="music-title">14.3 Billion Years</div>
                    <div class="music-artist">Andrew Prahlow</div>
                </div>
                <div class="controls">
                    <button class="play-btn">
                        <svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                    </button>
                    <div class="progress-area">
                        <span class="time current">0:00</span>
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                            <div class="progress-knob"></div>
                        </div>
                        <span class="time total">0:00</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2. Travelers' Encore -->
        <div class="music-item">
            <div class="music-cover">
                <img src="/assets/music/album_image/Andrew Prahlow - Travelers' encore.jpg" alt="Travelers' Encore">
            </div>
            <div class="player" data-src="/assets/music/Andrew Prahlow - Travelers' encore.mp3">
                <div class="track-info">
                    <div class="music-title">Travelers' Encore</div>
                    <div class="music-artist">Andrew Prahlow</div>
                </div>
                <div class="controls">
                    <button class="play-btn">
                        <svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                    </button>
                    <div class="progress-area">
                        <span class="time current">0:00</span>
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                            <div class="progress-knob"></div>
                        </div>
                        <span class="time total">0:00</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 3. Flower Dance -->
        <div class="music-item">
            <div class="music-cover">
                <img src="/assets/music/album_image/Flower Dance.jpg" alt="Flower Dance">
            </div>
            <div class="player" data-src="/assets/music/Flower Dance.mp3">
                <div class="track-info">
                    <div class="music-title">Flower Dance</div>
                    <div class="music-artist">DJ OKAWARI</div>
                </div>
                <div class="controls">
                    <button class="play-btn">
                        <svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                    </button>
                    <div class="progress-area">
                        <span class="time current">0:00</span>
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                            <div class="progress-knob"></div>
                        </div>
                        <span class="time total">0:00</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 4. Wake (Live) -->
        <div class="music-item">
            <div class="music-cover">
                <img src="/assets/music/album_image/Andrew Prahlow - Wake(Live).jpg" alt="Flower Dance">
            </div>
            <div class="player" data-src="/assets/music/Wake(Live).mp3">
                <div class="track-info">
                    <div class="music-title">Flower Dance</div>
                    <div class="music-artist">DJ OKAWARI</div>
                </div>
                <div class="controls">
                    <button class="play-btn">
                        <svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                    </button>
                    <div class="progress-area">
                        <span class="time current">0:00</span>
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                            <div class="progress-knob"></div>
                        </div>
                        <span class="time total">0:00</span>
                    </div>
                </div>
            </div>
        </div>

    </div>
</main>

<script>
document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.player').forEach(player => {
        const audio = new Audio(player.dataset.src);
        audio.preload = 'metadata';

        const btn   = player.querySelector('.play-btn');
        const fill  = player.querySelector('.progress-fill');
        const knob  = player.querySelector('.progress-knob');
        const cur   = player.querySelector('.time.current');
        const total = player.querySelector('.time.total');
        const area  = player.querySelector('.progress-area');

        btn.addEventListener('click', () => {
            if (audio.paused) {
                document.querySelectorAll('audio').forEach(a => a !== audio && a.pause());
                audio.play();
                btn.innerHTML = '<svg viewBox="0 0 24 24"><path d="M6 4h4v16H6zM14 4h4v16h-4z"/></svg>';
            } else {
                audio.pause();
                btn.innerHTML = '<svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>';
            }
        });

        audio.addEventListener('timeupdate', () => {
            if (!audio.duration) return;
            const percent = (audio.currentTime / audio.duration) * 100;
            fill.style.width = percent + '%';
            knob.style.left = percent + '%';
            cur.textContent = format(audio.currentTime);
        });
        audio.addEventListener('loadedmetadata', () => total.textContent = format(audio.duration));

        let dragging = false;
        const seek = (clientX) => {
            const rect = area.getBoundingClientRect();
            let pos = (clientX - rect.left) / rect.width;
            pos = Math.max(0, Math.min(1, pos));
            audio.currentTime = pos * audio.duration;
        };

        area.addEventListener('pointerdown', e => {
            e.preventDefault();
            dragging = true;
            area.classList.add('dragging');
            seek(e.clientX || (e.touches && e.touches[0].clientX));
        });

        document.addEventListener('pointermove', e => {
            if (dragging) {
                e.preventDefault();
                seek(e.clientX || (e.touches && e.touches[0].clientX));
            }
        });

        document.addEventListener('pointerup', () => {
            if (dragging) {
                dragging = false;
                area.classList.remove('dragging');
            }
        });
    });

    function format(s) {
        if (!isFinite(s)) return '0:00';
        const m = Math.floor(s / 60);
        const sec = Math.floor(s % 60);
        return m + ':' + (sec < 10 ? '0' : '') + sec;
    }
});
</script>

<script src="/include.js"></script>
</body>
</html>