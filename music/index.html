<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>音乐 - Lyang1273</title>
    <link rel="stylesheet" href="/style.css">
    <!-- Google Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        main{display:flex;flex-direction:column;align-items:center;padding-bottom:8rem;}
        .page-title{margin:4rem 0 3rem;font-size:3.2rem;font-weight:800;letter-spacing:3px;text-shadow:0 4px 20px rgba(0,0,0,0.5);}
        .music-list{width:100%;max-width:860px;padding:0 2rem;display:flex;flex-direction:column;gap:2rem;}

        .music-item{
            background:rgba(255,255,255,0.08);
            border:1px solid rgba(255,255,255,0.16);
            border-radius:16px;
            padding:1.6rem 2rem;
            display:flex;align-items:center;gap:1.8rem;
            transition:all .35s ease;
            backdrop-filter:blur(12px);
        }
        .music-item:hover{
            background:rgba(255,255,255,0.14);
            transform:translateY(-6px);
            box-shadow:0 16px 40px rgba(0,0,0,0.5);
        }
        .music-cover img{width:78px;height:78px;border-radius:12px;object-fit:cover;box-shadow:0 8px 25px rgba(0,0,0,0.6);}

        /* 自定义播放器样式 */
        .custom-player{display:flex;align-items:center;gap:1rem;flex:1;flex-wrap:wrap;font-size:0.95rem;}
        .play-btn{background:rgba(255,255,255,0.15);border:none;width:52px;height:52px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s;}
        .play-btn:hover{background:rgba(255,255,255,0.28);}
        .play-btn .material-icons{font-size:2rem;}

        .track-info{flex:1;min-width:140px;}
        .music-title{font-size:1.26rem;font-weight:600;}
        .music-artist{opacity:0.75;font-size:0.94rem;}

        .progress-container{position:relative;cursor:pointer;flex:1;min-width:200px;display:flex;align-items:center;gap:0.5rem;}
        .progress-bar{height:6px;background:rgba(255,255,255,0.15);border-radius:3px;flex:1;position:relative;}
        .progress-fill{height:100%;background:#6ecfff;border-radius:3px;width:0;transition:width .1s;}
        .progress-knob{position:absolute;top:50%;left:0;transform:translate(-50%,-50%);width:14px;height:14px;background:#6ecfff;border-radius:50%;opacity:0;transition:opacity .2s;}
        .progress-container:hover .progress-knob{opacity:1;}

        .volume-container{display:flex;align-items:center;gap:0.4rem;min-width:100px;}
        .volume-icon{font-size:1.3rem;cursor:pointer;opacity:0.8;}
        .volume-bar{width:80px;height:4px;background:rgba(255,255,255,0.15);border-radius:2px;position:relative;cursor:pointer;}
        .volume-fill{height:100%;background:#6ecfff;border-radius:2px;width:70%;}

        @media(max-width:768px){
            .music-item{flex-direction:column;text-align:center;padding:2rem 1.6rem;}
            .custom-player{gap:1.2rem;justify-content:center;}
            .music-cover img{width:100px;height:100px;}
        }
    </style>
</head>
<body>
<div class="bg-container"></div>
<div class="bg-overlay"></div>
<div w3-include-html="/header.html"></div>

<main>
    <h1 class="page-title">音乐</h1>
    <div class="music-list">

        <!-- 歌曲 1 -->
        <div class="music-item">
            <div class="music-cover">
                <img src="https://pic.netbian.com/uploads/allimg/2407/240727-1722079738-8c7f.jpg" alt="Outer Wilds">
            </div>
            <div class="custom-player">
                <button class="play-btn" onclick="this.closest('.custom-player').querySelector('audio').paused ? playAudio(this) : pauseAudio(this)">
                    <span class="material-icons">play_arrow</span>
                </button>
                <div class="track-info">
                    <div class="music-title">14.3 Billion Years</div>
                    <div class="music-artist">Andrew Prahlow</div>
                </div>
                <div class="progress-container" onclick="seek(event, this)">
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                        <div class="progress-knob"></div>
                    </div>
                    <span class="time-current">0:00</span> / <span class="time-total">0:00</span>
                </div>
                <div class="volume-container">
                    <span class="material-icons volume-icon" onclick="toggleMute(this)">volume_up</span>
                    <div class="volume-bar" onclick="setVolume(event, this)">
                        <div class="volume-fill"></div>
                    </div>
                </div>
                <audio preload="metadata" ontimeupdate="updateProgress(this)" onloadstart="loadAudio(this)" onloadedmetadata="loadAudio(this)">
                    <source src="/assets/music/Andrew Prahlow - 14.3 Billion Years.mp3" type="audio/mpeg">
                </audio>
            </div>
        </div>

        <!-- 歌曲 2 -->
        <div class="music-item">
            <div class="music-cover">
                <img src="https://pic.netbian.com/uploads/allimg/2407/240727-1722079738-8c7f.jpg" alt="Outer Wilds">
            </div>
            <div class="custom-player">
                <button class="play-btn" onclick="this.closest('.custom-player').querySelector('audio').paused ? playAudio(this) : pauseAudio(this)">
                    <span class="material-icons">play_arrow</span>
                </button>
                <div class="track-info">
                    <div class="music-title">Travelers' Encore</div>
                    <div class="music-artist">Andrew Prahlow</div>
                </div>
                <div class="progress-container" onclick="seek(event, this)">
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                        <div class="progress-knob"></div>
                    </div>
                    <span class="time-current">0:00</span> / <span class="time-total">0:00</span>
                </div>
                <div class="volume-container">
                    <span class="material-icons volume-icon" onclick="toggleMute(this)">volume_up</span>
                    <div class="volume-bar" onclick="setVolume(event, this)">
                        <div class="volume-fill"></div>
                    </div>
                </div>
                <audio preload="metadata" ontimeupdate="updateProgress(this)" onloadstart="loadAudio(this)" onloadedmetadata="loadAudio(this)">
                    <source src="/assets/music/Andrew Prahlow - Travelers' encore.mp3" type="audio/mpeg">
                </audio>
            </div>
        </div>

    </div>
</main>

<script>
// 播放/暂停
function playAudio(btn) {
    const audio = btn.closest('.custom-player').querySelector('audio');
    audio.play();
    btn.innerHTML = '<span class="material-icons">pause</span>';
}
function pauseAudio(btn) {
    const audio = btn.closest('.custom-player').querySelector('audio');
    audio.pause();
    btn.innerHTML = '<span class="material-icons">play_arrow</span>';
}

// 进度条
function updateProgress(audio) {
    const player = audio.closest('.custom-player');
    const percent = (audio.currentTime / audio.duration) * 100 || 0;
    player.querySelector('.progress-fill').style.width = percent + '%';
    player.querySelector('.progress-knob').style.left = percent + '%';
    player.querySelector('.time-current').textContent = formatTime(audio.currentTime);
    player.querySelector('.time-total').textContent = formatTime(audio.duration);
}
function seek(e, container) {
    const audio = container.closest('.custom-player').querySelector('audio');
    const rect = container.getBoundingClientRect();
    const pos = (e.clientX - rect.left) / rect.width;
    audio.currentTime = pos * audio.duration;
}
function loadAudio(audio) {
    const player = audio.closest('.custom-player');
    if (audio.duration) player.querySelector('.time-total').textContent = formatTime(audio.duration);
}

// 音量
function setVolume(e, bar) {
    const audio = bar.closest('.custom-player').querySelector('audio');
    const rect = bar.getBoundingClientRect();
    const pos = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
    audio.volume = pos;
    bar.querySelector('.volume-fill').style.width = (pos * 100) + '%';
}
function toggleMute(icon) {
    const audio = icon.closest('.custom-player').querySelector('audio');
    audio.muted = !audio.muted;
    icon.textContent = audio.muted ? 'volume_off' : 'volume_up';
}

// 时间格式化
function formatTime(seconds) {
    if (isNaN(seconds)) return '0:00';
    const m = Math.floor(seconds / 60);
    const s = Math.floor(seconds % 60);
    return m + ':' + (s < 10 ? '0' : '') + s;
}
</script>

<script src="/include.js"></script>
</body>
</html>